#config_version=6

# this mode will delay ball_starting. In order to see flash scores as in EM game.
# It runs before ball is ejected successfully.
# Special provision to make sure all coils are idle before ejecting the ball
# mode from Marc Rechte quickdraw (https://gitlab.com/mrechte/quickdraw_mpf), modified for Gemini by me


mode:
  start_events: ball_will_start
  priority: 500

queue_relay_player:
  ball_starting:
    post: ball_start_show
    wait_for: ball_start_show_ended

coil_player:
  ball_start_show:
    c_score_motor: enable
  ball_start_show_ended:
    c_score_motor: disable

light_player:                   # on 2 player machines lights just go off while advancing player unit, 
  mode_ball_start_started:      # but on 4 player machines the lights animate with the player unit
    l_player1: off
    l_player2: off

shows:
  player_unit_1:
    - duration: 250ms
      coils:
        c_player_unit: pulse
  player_unit_2:
    - duration: 125ms
      coils:
        c_player_unit: pulse
    - duration: 250ms    # include a pause
      coils:
        c_player_unit: pulse
  player_unit_3:
    - duration: 125ms
      coils:
        c_player_unit: pulse
    - duration: 125ms
      coils:
        c_player_unit: pulse
    - duration: 250ms    # include a pause
      coils:
        c_player_unit: pulse

show_player:

  ball_start_show{current_player.number==1 and current_player.ball==1}:
    player_unit_1:
      loops: 0
      events_when_completed: ball_start_show_ended
  ball_start_show{current_player.number==2}:
    player_unit_1:
      loops: 0
      events_when_completed: ball_start_show_ended
  ball_start_show{current_player.number==1 and current_player.ball > 1 and game.num_players == 1}:
    player_unit_2:
      loops: 0
      events_when_completed: ball_start_show_ended
  ball_start_show{current_player.number==1 and current_player.ball > 1 and game.num_players == 2}:
    player_unit_1:
      loops: 0
      events_when_completed: ball_start_show_ended